package com.github.hydra.constant;


import org.apache.commons.lang3.StringUtils;
import org.junit.Test;

import java.util.Base64;


public class UtilTest {


    private static final String json =
            "{\"code\":0,\"data\":{\"asks\":[[\"0.008115\",\"2000.000000\"],[\"0.008120\",\"3000.000000\"],[\"0.008125\",\"3000"
            + ".000000\"],[\"0.008130\",\"7992.000000\"],[\"0.008136\",\"170.111400\"],[\"0.008154\",\"107.047500\"],[\"0.008160\",\"568"
            + ".000000\"],[\"0.008200\",\"1200.000000\"],[\"0.008206\",\"270.719600\"],[\"0.008218\",\"2000.000000\"],[\"0.008230\","
            + "\"1875.740000\"],[\"0.008250\",\"27.336200\"],[\"0.008325\",\"4337.573400\"],[\"0.008500\",\"3000.000000\"],[\"0.008590\","
            + "\"10000.000000\"],[\"0.008598\",\"29709.914500\"],[\"0.008600\",\"5000.000000\"],[\"0.008615\",\"18000.000000\"],[\"0"
            + ".008696\",\"26615.325800\"],[\"0.008750\",\"30000.000000\"],[\"0.008800\",\"25177.000000\"],[\"0.008900\",\"20000"
            + ".000000\"],[\"0.008964\",\"32824.966200\"],[\"0.009110\",\"49100.805300\"],[\"0.009408\",\"3000.000000\"],[\"0.009570\","
            + "\"6790.784900\"],[\"0.009750\",\"100.000000\"],[\"0.009786\",\"77318.614900\"],[\"0.009789\",\"12372.050000\"],[\"0"
            + ".009988\",\"26727.560900\"],[\"0.009999\",\"22649.510000\"],[\"0.010000\",\"72408.050000\"],[\"0.010278\",\"16172"
            + ".224200\"],[\"0.010289\",\"112456.987800\"],[\"0.010300\",\"204919.395300\"],[\"0.010324\",\"1000.000000\"],[\"0.010400\","
            + "\"25295.432100\"],[\"0.010501\",\"3000.000000\"],[\"0.010531\",\"8000.000000\"],[\"0.010534\",\"2374.000100\"],[\"0"
            + ".010700\",\"621.533300\"],[\"0.010779\",\"1000.000000\"],[\"0.010800\",\"8000.000000\"],[\"0.010850\",\"2633.000000\"],"
            + "[\"0.010973\",\"502.103600\"],[\"0.010980\",\"1000.000000\"],[\"0.011000\",\"3000.000000\"],[\"0.011220\",\"40772"
            + ".000000\"],[\"0.011530\",\"797.732100\"],[\"0.011700\",\"5000.000000\"],[\"0.012000\",\"235029.295000\"],[\"0.012197\","
            + "\"29949.485000\"],[\"0.012553\",\"400.387800\"],[\"0.012700\",\"4300.000000\"],[\"0.012900\",\"2022.000000\"],[\"0"
            + ".013000\",\"2431.000000\"],[\"0.013200\",\"8281.000000\"],[\"0.013225\",\"7522.045400\"],[\"0.013300\",\"9825.032800\"],"
            + "[\"0.013400\",\"3000.000000\"],[\"0.014157\",\"4819.554600\"],[\"0.014172\",\"923.852600\"],[\"0.014200\",\"346.300000\"],"
            + "[\"0.014400\",\"2415.000000\"],[\"0.014480\",\"6919.939900\"],[\"0.014900\",\"4000.000000\"],[\"0.014967\",\"4678"
            + ".022200\"],[\"0.015000\",\"7454.081900\"],[\"0.015100\",\"14000.000000\"],[\"0.015197\",\"3613.023500\"],[\"0.015200\","
            + "\"15612.457000\"],[\"0.015300\",\"1000.000000\"],[\"0.015380\",\"8000.000000\"],[\"0.015400\",\"1000.000000\"],[\"0"
            + ".015500\",\"10000.000000\"],[\"0.015600\",\"3000.000000\"],[\"0.015698\",\"200.000000\"],[\"0.015699\",\"1000.000000\"],"
            + "[\"0.015744\",\"5799.802000\"],[\"0.015780\",\"50000.000000\"],[\"0.015960\",\"9907.142600\"],[\"0.016000\",\"3000"
            + ".000000\"],[\"0.016113\",\"800.000000\"],[\"0.016370\",\"221.456500\"],[\"0.016882\",\"6032.101200\"],[\"0.017410\","
            + "\"15981.651000\"],[\"0.017510\",\"12314.468000\"],[\"0.017810\",\"13420.617000\"],[\"0.017900\",\"138.309000\"],[\"0"
            + ".017988\",\"5299.120900\"],[\"0.018000\",\"22000.000000\"],[\"0.018310\",\"2759.380000\"],[\"0.018410\",\"10957.884000\"],"
            + "[\"0.018600\",\"56367.150000\"],[\"0.018900\",\"1000.000000\"],[\"0.019630\",\"6829.010000\"],[\"0.020000\",\"62736"
            + ".080000\"],[\"0.020817\",\"646.619700\"],[\"0.021400\",\"11524.832700\"],[\"0.021724\",\"7615.788400\"],[\"0.021800\","
            + "\"2000.000000\"],[\"0.022500\",\"3000.000000\"],[\"0.022600\",\"3642.133200\"],[\"0.023000\",\"57706.081200\"],[\"0"
            + ".023391\",\"7972.718700\"],[\"0.023700\",\"3000.000000\"],[\"0.025000\",\"5000.000000\"],[\"0.025690\",\"7668.832700\"],"
            + "[\"0.025800\",\"45483.750000\"],[\"0.026000\",\"513895.000000\"],[\"0.026800\",\"700.000000\"],[\"0.028000\",\"2310"
            + ".870000\"],[\"0.028200\",\"20128.013200\"],[\"0.028700\",\"10064.006600\"],[\"0.029500\",\"2650.000000\"],[\"0.029600\","
            + "\"2650.000000\"],[\"0.030000\",\"1035549.970800\"],[\"0.031428\",\"9557.000000\"],[\"0.031600\",\"15161.250000\"],[\"0"
            + ".032000\",\"12243.644800\"],[\"0.034000\",\"500000.000000\"],[\"0.035000\",\"40416.653900\"],[\"0.035100\",\"5000"
            + ".000000\"],[\"0.035800\",\"5095.000000\"],[\"0.036000\",\"10000.000000\"],[\"0.036405\",\"4380.358800\"],[\"0.037800\","
            + "\"5000.000000\"],[\"0.038500\",\"50370.000000\"],[\"0.039999\",\"588.000000\"],[\"0.040000\",\"3222.705000\"],[\"0"
            + ".042500\",\"9038.000000\"],[\"0.042800\",\"2400.000000\"],[\"0.042947\",\"791.597600\"],[\"0.043000\",\"39000.000000\"],"
            + "[\"0.044000\",\"10000.000000\"],[\"0.044500\",\"600.000000\"],[\"0.045000\",\"4550.000000\"],[\"0.046100\",\"1322"
            + ".500000\"],[\"0.046600\",\"4309.000000\"],[\"0.048000\",\"301500.000000\"],[\"0.049200\",\"9816.000700\"],[\"0.049400\","
            + "\"57.043000\"],[\"0.050000\",\"775888.000000\"],[\"0.051200\",\"7362.000500\"],[\"0.051800\",\"518.000000\"],[\"0"
            + ".053100\",\"3000.000000\"],[\"0.054200\",\"139.251200\"],[\"0.054890\",\"1806.000000\"],[\"0.056300\",\"15367.000000\"],"
            + "[\"0.056800\",\"3000.000000\"],[\"0.058100\",\"13728.478800\"],[\"0.058300\",\"25681.000000\"],[\"0.058800\",\"10000"
            + ".000000\"],[\"0.059800\",\"518.000000\"],[\"0.060000\",\"61571.925000\"],[\"0.060600\",\"1000.000000\"],[\"0.063620\","
            + "\"52652.367100\"],[\"0.064500\",\"1000.000000\"],[\"0.065000\",\"34053.264400\"],[\"0.065398\",\"8722.000000\"],[\"0"
            + ".065400\",\"104.438400\"],[\"0.065600\",\"2262.500000\"],[\"0.066600\",\"10000.000000\"],[\"0.067000\",\"8906.155000\"],"
            + "[\"0.067906\",\"3490.000000\"],[\"0.068000\",\"43.293300\"],[\"0.068800\",\"10000.000000\"],[\"0.068900\",\"38957"
            + ".000000\"],[\"0.069000\",\"3000.000000\"],[\"0.069800\",\"1313.000000\"],[\"0.069900\",\"15655.000000\"],[\"0.070000\","
            + "\"528409.033000\"],[\"0.071300\",\"5000.000000\"],[\"0.071500\",\"1082.000000\"],[\"0.071900\",\"2000.000000\"],[\"0"
            + ".073300\",\"5000.000000\"],[\"0.073400\",\"1376.000000\"],[\"0.074500\",\"2873.969100\"],[\"0.075000\",\"9979.948800\"],"
            + "[\"0.075100\",\"4341.997900\"],[\"0.075210\",\"16733.871800\"],[\"0.076500\",\"887.328800\"],[\"0.077000\",\"2000"
            + ".000000\"],[\"0.078000\",\"2020.000000\"],[\"0.078200\",\"520.000000\"],[\"0.078800\",\"10000.000000\"],[\"0.078900\","
            + "\"13000.000000\"],[\"0.079800\",\"4500.000000\"],[\"0.080000\",\"52000.000000\"],[\"0.081300\",\"1500.000000\"],[\"0"
            + ".081900\",\"19902.528700\"],[\"0.082000\",\"3000.000000\"],[\"0.082300\",\"94639.930000\"],[\"0.082800\",\"2000.000000\"],"
            + "[\"0.083000\",\"24076.235000\"],[\"0.084800\",\"975.000000\"],[\"0.085000\",\"21581.620100\"],[\"0.087600\",\"58"
            + ".746600\"],[\"0.088800\",\"20000.000000\"],[\"0.089800\",\"520.000000\"]],\"bids\":[[\"0.008095\",\"459.1661\"],[\"0"
            + ".008056\",\"131.0157\"],[\"0.008022\",\"196.9127\"],[\"0.007983\",\"4445.5272\"],[\"0.007974\",\"73.1646\"],[\"0.007901\","
            + "\"576.9883\"],[\"0.007822\",\"128491.4181\"],[\"0.007821\",\"261410.2396\"],[\"0.007800\",\"335.51\"],[\"0.007731\",\"2267"
            + ".7382\"],[\"0.007600\",\"81561.3402\"],[\"0.007564\",\"4435.8984\"],[\"0.007500\",\"92689.982\"],[\"0.007478\",\"5000\"],"
            + "[\"0.007470\",\"4255.051\"],[\"0.007457\",\"4903.137\"],[\"0.007455\",\"2072.6105\"],[\"0.007449\",\"1999.3025\"],[\"0"
            + ".007422\",\"1000\"],[\"0.007421\",\"1000\"],[\"0.007420\",\"1000\"],[\"0.007419\",\"1000\"],[\"0.007418\",\"1000\"],[\"0"
            + ".007417\",\"1000\"],[\"0.007416\",\"1000\"],[\"0.007415\",\"1000\"],[\"0.007414\",\"1000\"],[\"0.007413\",\"1000\"],[\"0"
            + ".007412\",\"1000\"],[\"0.007411\",\"1000\"],[\"0.007410\",\"1000\"],[\"0.007409\",\"1000\"],[\"0.007408\",\"1000\"],[\"0"
            + ".007407\",\"1000\"],[\"0.007406\",\"1000\"],[\"0.007405\",\"1000\"],[\"0.007404\",\"1000\"],[\"0.007403\",\"1000\"],[\"0"
            + ".007402\",\"1000\"],[\"0.007401\",\"1000\"],[\"0.007400\",\"63027.7231\"],[\"0.007390\",\"19580\"],[\"0.007362\",\"510\"],"
            + "[\"0.007300\",\"73081.5836\"],[\"0.007296\",\"17152.7632\"],[\"0.007290\",\"470\"],[\"0.007239\",\"1474.2131\"],[\"0"
            + ".007235\",\"139537.29\"],[\"0.007206\",\"253.513\"],[\"0.007200\",\"98017.7126\"],[\"0.007190\",\"61125.1724\"],[\"0"
            + ".007172\",\"30055.5678\"],[\"0.007171\",\"25982.4293\"],[\"0.007170\",\"152\"],[\"0.007131\",\"52539.0918\"],[\"0"
            + ".007129\",\"32082.5489\"],[\"0.007085\",\"215494.3011\"],[\"0.007000\",\"41134.595\"],[\"0.006907\",\"9000\"],[\"0"
            + ".006906\",\"20000\"],[\"0.006790\",\"39297.9752\"],[\"0.006678\",\"53919.9632\"],[\"0.006500\",\"1341.2453\"],[\"0"
            + ".006460\",\"3852.7196\"],[\"0.006208\",\"23991.2778\"],[\"0.006006\",\"20018.5327\"],[\"0.006002\",\"2422.6476\"],[\"0"
            + ".006001\",\"6152.053\"],[\"0.006000\",\"300\"],[\"0.005888\",\"206821.8705\"],[\"0.005800\",\"1000\"],[\"0.005661\","
            + "\"14384.4148\"],[\"0.005590\",\"20601.6345\"],[\"0.005500\",\"500\"],[\"0.005300\",\"1000\"],[\"0.005010\",\"49776"
            + ".1617\"],[\"0.005000\",\"500\"],[\"0.004972\",\"27728.3927\"],[\"0.004610\",\"4706.2786\"],[\"0.004500\",\"1000\"],[\"0"
            + ".004354\",\"27613.8344\"],[\"0.004222\",\"11827.5615\"],[\"0.003812\",\"1472.9334\"],[\"0.003736\",\"10910.7763\"],[\"0"
            + ".003118\",\"26049.7901\"],[\"0.002500\",\"26852.6301\"],[\"0.001882\",\"12206.1077\"],[\"0.001264\",\"13711.1995\"],[\"0"
            + ".000646\",\"10582.8219\"],[\"0.000161\",\"8598.2589\"],[\"0.000029\",\"500000\"],[\"0.000022\",\"300000\"],[\"0.000021\","
            + "\"200000\"],[\"0.000005\",\"500000\"],[\"0.000001\",\"300000\"]]},\"msg\":\"success\"}";


    @Test
    public void Test_Gzip() {

        byte[] bytes = Util.compressGzip(json);
        String base64Str = Base64.getEncoder().encodeToString(bytes);
        System.out.println(base64Str.length() + " " + base64Str);

        bytes = Base64.getDecoder().decode(base64Str);
        String newJson = Util.unCompressGzip(bytes);
        System.out.println(StringUtils.equals(json, newJson));
    }
}
